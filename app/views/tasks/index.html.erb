<h1>Listing Tasks</h1>

<div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:400px;'>
 <div class="dhx_cal_navline">
   <div class="dhx_cal_prev_button">&nbsp;</div>
   <div class="dhx_cal_next_button">&nbsp;</div>
   <div class="dhx_cal_today_button"></div>
   <div class="dhx_cal_date"></div>
   <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
   <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
   <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
 </div>
 <div class="dhx_cal_header">
 </div>
 <div class="dhx_cal_data">
 </div>
</div>

<script>
    scheduler.config.xml_date="%Y-%m-%d %H:%i";
    scheduler.init("scheduler_here");
    scheduler.load("<%= data_path %>", "json");

</script>

<table class="table">
  <thead>
    <tr class="active">
      <th class="text-center">Type</th>
      <th class="text-center">Label</th>
      <th class="text-center">Text</th>
      <th class="text-center">Author</th>
      <th class="text-center">Assignee</th>
      <th class="text-center">Start Date</th>
      <th class="text-center">End Date</th>
      <th class="text-center" colspan="3">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.tasktype %></td>
        <td><%= task.label %></td>
        <td><%= task.text %></td>
        <td><%= task.author_from_id_to_name %></td>
        <td><%= task.assignee_from_id_to_name %></td>
        <td><%= task.starttime.strftime('%Y-%m-%d') %></td>
        <td><%= task.endtime.strftime('%Y-%m-%d') %></td>
        <td><%= link_to 'Show', task, :class => "btn btn-primary btn-xs" %></td>
        <td><%= link_to 'Edit', edit_task_path(task), :class => "btn btn-primary btn-xs" %></td>
        <td><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger btn-xs" %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Task', new_task_path, :class => "btn btn-primary" %>
